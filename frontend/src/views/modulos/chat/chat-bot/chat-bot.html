<page :params="acesso">


    <div class="panel-body">

        <div class="parent p-2">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
                        type="button" role="tab" aria-controls="home" aria-selected="true">Chat</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="config-tab" data-bs-toggle="tab" data-bs-target="#config" type="button"
                        role="tab" aria-controls="config" aria-selected="true">Configurações</button>
                </li>

            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <div class="row p-2">
                        <div class="col">
                            
                            <div class="painel-modelo" id="painel">
                                <div class="container-fluid">
                                    <div class="row">
                                        <!-- Container da esquerda (Campos de Cadastro) -->
                                        <div class="col">
                                            <div class=" mt-4">
                                                <div class="card-body">
                                                    <form @submit.prevent="submitForm">
                                                        <div class="mb-3">
                                                            <label for="nome" class="form-label">Nome Bot</label>
                                                            <input type="text" id="nome" v-model="formData.bot_nome"
                                                                class="form-control">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label class="form-label">Mensagem de Inicial</label>
                                                            <textarea id="style" 
                                                            style="height: 204px;"
                                                            v-model="formData.msg_inicial"
                                                                placeholder="Bem-vindo"
                                                                class="form-control text-chat"></textarea>
                                                        </div>
                                                        <label class="form-label">Modelo IA</label>

                                                        <div class="mb-3">

                                                            <quill-editor theme="snow" v-model="formData.modelo_ai"
                                                                :options="descricao"
                                                                style="height: 204px;"></quill-editor>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col" v-if="formData.chat_info_id" >
                            <div>
                                <div class="btn-group" role="group" aria-label="Basic example">
                                    <div class="p-2">
                                        <button class="btn btn-success" @click="createChat">{{
                                            formData.chat_info_id ? 'Atualizar' : 'Publicar'
                                            }}</button>
                                    </div>
                                    <div class="p-2" v-if="formData.chat_info_id">
                                        <button class="btn btn-success" @click="ver">{{
                                            'Ver'
                                            }}</button>
                                    </div>
                                </div>   
    
                            </div>
                            <div class="chat-modelo" id="container-chat" style="height: 80%;"></div>
                        </div>
                        <div v-else>
                            <div>
                                <div class="btn-group" role="group" aria-label="Basic example">
                                    <div class="p-2">
                                        <button class="btn btn-success" @click="createChat">{{
                                            formData.chat_info_id ? 'Atualizar' : 'Publicar'
                                            }}</button>
                                    </div>
                                    <div class="p-2" v-if="formData.chat_info_id">
                                        <button class="btn btn-success" @click="ver">{{
                                            'Ver'
                                            }}</button>
                                    </div>
                                </div>   
    
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
                <div class="tab-pane" id="config" role="tabpanel" aria-labelledby="config-tab">
                    <div class="row p-2">
                        <div class="col">
                            <div class="painel-modelo" id="painel">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col p-2">
                                            <div class="painel-modelo" id="painel">
                                                <div class="accordion">
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingTwo">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                                                aria-expanded="false" aria-controls="collapseTwo">
                                                                Configuração WhatsApp
                                                            </button>
                                                        </h2>
                                                        <div id="collapseTwo" class="accordion-collapse collapse"
                                                            aria-labelledby="headingTwo"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body">
                                                                <div class="mb-3">
                                                                    <label for="nome" class="form-label">Token :</label>
                                                                    <input type="text" id="nome"
                                                                        v-model="formData.token_whatsapp"
                                                                        class="form-control">
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label for="nome" class="form-label">Aplicativo
                                                                        Secreto :</label>
                                                                    <input type="text" id="nome"
                                                                        v-model="formData.app_secret_whatsapp"
                                                                        class="form-control">
                                                                </div>

                                                                <div class="mb-3">
                                                                    <label for="nome" class="form-label">ID Telefone
                                                                        :</label>
                                                                    <input type="text" id="nome"
                                                                        v-model="formData.wa_id_numero_telefone"
                                                                        class="form-control">
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingOne">
                                                            <button class="accordion-button" type="button"
                                                                data-bs-toggle="collapse" data-bs-target="#collapseOne"
                                                                aria-expanded="true" aria-controls="collapseOne">
                                                                Configurar Cores do Chat Web
                                                            </button>
                                                        </h2>
                                                        <div id="collapseOne" class="accordion-collapse collapse show"
                                                            aria-labelledby="headingOne"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body">
                                                                <div class="mt-container">
                                                                    <div class="p-4 grid">
                                                                        <div class="upload mt-4 pe-md-4">
                                                                            <div class="avatar">
                                                                                <input ref="fl_profile" type="file"
                                                                                    class="d-none" accept="image/*"
                                                                                    @change="change_file" />
                                                                                <img :src="formData.bot_foto ? formData.bot_foto : require('@/assets/images/user-no-foto.png')"
                                                                                    alt="profile" class="avatar"
                                                                                    @click="$refs.fl_profile.click()" />
                                                                            </div>
                                                                            <p class="mt-2">Selecione uma Foto</p>

                                                                        </div>
                                                                    </div>


                                                                    <div class="p-4 grid">
                                                                        <label>Cor Conversa - Usuário</label>
                                                                        <input class="color-input" type="color"
                                                                            v-model="formData.cor_conversa_user"
                                                                            @change="applyStyles" />
                                                                        <label>Cor Conversa - Atendente</label>
                                                                        <input class="color-input" type="color"
                                                                            v-model="formData.cor_conversa_atend"
                                                                            @change="applyStyles" />
                                                                    </div>

                                                                    <div class="p-4 grid">
                                                                        <label>Botão Enviar</label>
                                                                        <input class="color-input" type="color"
                                                                            v-model="formData.cor_botao_enviar"
                                                                            @change="applyStyles" />
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item" v-if="formData.uuid">
                                                        <h2 class="accordion-header" id="headingTwo">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                                                aria-expanded="false" aria-controls="collapseTwo">
                                                                Configurar Web - Código (Javascript)
                                                            </button>
                                                        </h2>
                                                        <div id="collapseTwo" class="accordion-collapse collapse"
                                                            aria-labelledby="headingTwo"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body">
                                                                <div class="row">
                                                                    <div class="col-md-8">
                                                                        <textarea v-model="codigo" class="form-control"
                                                                            rows="8" disabled>
                                                                        {{codigo}}
                                                                      </textarea>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <div class="mb-3">
                                                                            <button @click="copiarCodigo"
                                                                                v-if="codigo !=''"
                                                                                class="btn btn-primary btn-block">Copiar
                                                                                Código</button>
                                                                            <button @click="gerarCodigo"
                                                                                v-if="codigo ==''"
                                                                                class="btn btn-primary btn-block">Gerar
                                                                                Código</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>

                                            </div>
                                            <div class="btn-group" role="group" aria-label="Basic example">
                                                <div class="p-2">
                                                    <button class="btn btn-success" @click="createChat">{{
                                                        formData.chat_info_id ? 'Atualizar' : 'Publicar'
                                                        }}</button>
                                                </div>
                                                <div class="p-2" v-if="formData.chat_info_id">
                                                    <button class="btn btn-success" @click="ver">{{
                                                        'Ver'
                                                        }}</button>
                                                </div>
                                            </div>

                                        </div>


                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

            </div>



        </div>
    </div>
</page>